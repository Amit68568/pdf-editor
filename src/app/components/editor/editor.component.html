<div class="editor-container" [class.maximized]="isFullScreen">
  <!-- Header -->
  <div class="editor-header">
    <button class="back-btn" (click)="goBack()" title="Go back">â†</button>
    <div class="header-title">
      <input *ngIf="document" [(ngModel)]="document.name" (blur)="saveDocument()" class="title-input"
        placeholder="Untitled Document">
      <p *ngIf="document" class="doc-type" [ngClass]="document.type">{{ document.type.toUpperCase() }}</p>
    </div>
    <div class="header-actions">
      <button class="action-btn save" (click)="saveDocument()" [disabled]="isSaving" title="Save changes">
        <span class="btn-icon">ğŸ’¾</span>
        Save
      </button>
      <button class="action-btn download" (click)="downloadDocument()" [disabled]="!document" title="Download to local">
        <span class="btn-icon">ğŸ“¥</span>
        Download
      </button>
    </div>
  </div>

  <!-- Top Toolbar -->
  <div class="editor-toolbar" #editorToolbar>
    <div class="zoom-controls">
      <input type="range" min="50" max="150" step="10" [(ngModel)]="zoomLevel">
      <span class="zoom-label">{{ zoomLevel }}%</span>
    </div>

    <div class="page-controls">
      <span class="page-count">Pages {{ currentPage }} / {{ totalPages }}</span>
    </div>

    <div class="screen-controls">
      <button class="icon-btn" (click)="toggleFullScreen()"
        [title]="isFullScreen ? 'Exit Full Screen' : 'Enter Full Screen'">
        <span *ngIf="!isFullScreen">â¤¢ Full Screen</span>
        <span *ngIf="isFullScreen" style="color: #ef4444;">âœ• Exit Full Screen</span>
      </button>
    </div>
  </div>

  <!-- Alerts -->
  <div *ngIf="errorMessage" class="alert error">
    {{ errorMessage }}
  </div>
  <div *ngIf="successMessage" class="alert success">
    {{ successMessage }}
  </div>

  <!-- Editor -->
  <div class="editor-body">
    <div *ngIf="isLoading" class="state-message">
      <p>Loading document...</p>
    </div>

    <div class="editor-wrapper" *ngIf="!isLoading && document">
      <div class="zoom-container">
        <!-- DEBUG INFO -->


        <!-- Zoom handled via CSS variable in component -->
        <ckeditor [editor]="Editor" [config]="config" [(ngModel)]="editingContent" (change)="onContentChange()"
          (ready)="onEditorReady($event)" [style.--editor-zoom]="zoomLevel / 100">
        </ckeditor>
      </div>
    </div>
  </div>
</div>